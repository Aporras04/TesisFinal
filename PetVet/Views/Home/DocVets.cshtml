
@{
    ViewBag.Title = "DocVets";
}

@model List<PetVet.Models.Veterinaria>

<div class="container">
    <div class="d-flex" style="justify-content:space-between;">
        <div><h1>Veterinarias</h1></div>
        @*<div style="margin-top:auto; margin-bottom:auto;"><input id="search-value" type="text" placeholder="Buscar..." /></div>*@
    </div>

    <div style="width: 100%; margin-right: auto; margin-left: auto; margin-bottom: 2rem;" id="vet-list"></div>

    @*<div style="margin-top:2rem;  text-align:center;">
            <button type="button" onclick="addNewVet()" class="btn btn-new-mas">Nueva Veterinaria</button>
        </div>*@
</div>

<script type="text/x-kendo-template" id="template">
    <div style="width:100%; display:flex; justify-content:center;">
        <button onclick="goToUsers(#=VeterinariaID#)" class="card vet-card" style="width:500px; border:1px solid; text-align:center;height:fit-content; margin-bottom:1rem; padding:1rem 0; border-radius:8px; background-color:white;">
            <div class="card-body">
                <h3>#:Nombre#</h3>
                <div style="margin-top:1rem;">
                    <p style="margin-bottom:0;">#=Direccion#</p>
                    <p>#=Telefono#</p>
                </div>
            </div>
        </button>
    </div>

</script>

<script>

//var mascotas = [
//    { id: 1, Nombre: "Clínica de Mascotas AmigoAnimal", Direccion: "Bakker 2", Telefono: "2812799" },
//    { id: 2, Nombre: "Clínica Veterinaria Animalia", Direccion: "El Condado", Telefono: "2812799" },
//    { id: 3, Nombre: "Hospital Veterinario PetCare", Direccion: "Barrio Nuevo", Telefono: "2812799" },
//    { id: 4, Nombre: "Centro Veterinario Paws & Claws", Direccion: "Tumbaco", Telefono: "2812799" },
//    { id: 5, Nombre: "Consultorio Veterinario VetVida", Direccion: "El Bosque", Telefono: "2812799" }
//    ];

     var veterinarias = @Html.Raw(Json.Encode(Model));

    $("#vet-list").kendoListView({
        dataSource: {
            data: veterinarias
        },
        template: kendo.template($("#template").html()),
        pageable: false,
        filterable: true
    });

    function goToUsers(vetid) {
        var url = '@Url.Action("UsersList", "Home")?id=' + vetid;
        window.location.href = url;
        @*window.location.href = "@Html.Raw(Url.Action("UsersList", "Home"))";*@
    }

    function addNewVet() {
        window.location.href = "@Html.Raw(Url.Action("NewMed", "Home"))";
    }

    //for filtering grid client list using search box
    function filtergrid(dataSource, query) {
        dataSource.filter({
            logic: "or",
            filters: [
                {
                    field: "Nombre",
                    operator: "contains",
                    value: query
                },
                {
                    field: "Direccion",
                    operator: "contains",
                    value: query
                },
                {
                    field: "Telefono",
                    operator: "contains",
                    value: query
                }
            ]
        });


    }

    $(document).ready(function () {
        document.getElementById("search-value").addEventListener("input", (e) => {
            var query = e.target.value.toLowerCase();
            console.log("Sirve")
            //var dataSourceListView = $("#vet-list").data("kendoListView").dataSource.read();

            //if (query == "") {
            //    dataSourceListView.filter({});
            //} else {

            //    filtergrid(dataSourceListView, query);
            //}
        });
    })

</script>

<style>

    body {
        background-color: rgba(220, 199, 170, .25)
    }

    .k-listview-content {
        display: flex;
        flex-direction: column;
    }

    .card-body h3 {
        margin: 0;
    }

    #vet-list {
        padding: 1rem;
        border: none;
        background-color: transparent;
    }

    .btn-new-mas {
        background-color: #F7C331;
        width: 30%;
        color: white;
        height: 40px;
    }

    .vet-card:hover {
        border: 1px solid #F7882F !important;
    }

    .vet-card:active {
        background-color: #F7882F !important;
    }
</style>

